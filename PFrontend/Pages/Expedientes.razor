@page "/expedientes"
@inject HttpClient Http
@using System.Net.Http.Json

<h3>Listado de Empleados</h3>

@if (empleados == null)
{
    <p>Cargando empleados...</p>
}
else if (empleados.Count == 0)
{
    <p>No hay empleados registrados.</p>
}
else
{
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Nombre</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var emp in empleados)
            {
                <tr>
                    <td>@emp.NombreCompleto</td>
                    <td>
                        <NavLink class="btn btn-primary btn-sm" href="@($"/expediente/{emp.Id}")">
                            Ver/Llenar Expediente
                        </NavLink>
                    </td>
                </tr>
            }
        </tbody>
    </table>
}

@code {
    public class EmpleadoDto
    {
        public int Id { get; set; }
        public string NombreCompleto { get; set; } = "";
    }

    List<EmpleadoDto>? empleados;

    protected override async Task OnInitializedAsync()
    {
        empleados = await Http.GetFromJsonAsync<List<EmpleadoDto>>("api/empleados");
    }
}